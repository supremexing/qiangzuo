import{P as e,$ as i,Q as s,x as o,z as n,o as t,c as a,w as l,i as p,e as u,l as r,q as d,u as g,j as c,k as m,O as h}from"./index-a42ec16d.js";import{_ as f}from"./uni-easyinput.ea3b63c8.js";import{_ as y}from"./uni-id-pages-agreements.1abd891e.js";import{_}from"./uni-id-pages-fab-login.33355d2c.js";import{m as b}from"./login-page.mixin.ebe712ad.js";import{_ as x}from"./plugin-vueexport-helper.1b428a4d.js";import"./uni-icons.57c31acb.js";import"./uni-popup-dialog.4fb8a64c.js";import"./store.07b06ab6.js";const v=x({mixins:[b],data:()=>({type:"",phone:"",focusPhone:!1,logo:"/static/logo.png"}),computed:{loginTypes:async()=>e.loginTypes,isPhone(){return/^1\d{10}$/.test(this.phone)},imgSrc(){return"weixin"==this.type?"/uni_modules/uni-id-pages/static/login/weixin.png":"/uni_modules/uni-id-pages/static/app-plus/apple.png"}},async onLoad(s){let o=s.type||e.loginTypes[0];this.type=o,"univerify"!=o&&(this.focusPhone=!0),this.$nextTick((()=>{["weixin","apple"].includes(o)&&(this.$refs.uniFabLogin.servicesList=this.$refs.uniFabLogin.servicesList.filter((e=>e.id!=o)))})),i("uni-id-pages-setLoginType",(e=>{this.type=e}))},onShow(){document.onkeydown=e=>{var i=e||window.event;i&&13==i.keyCode&&this.toSmsPage()}},onUnload(){s("uni-id-pages-setLoginType")},onReady(){},methods:{showCurrentWebview(){undefined.setStyle({top:0})},quickLogin(e){var i,s;let o={};(null==(i=e.detail)?void 0:i.code)&&(o.phoneNumberCode=e.detail.code),("weixinMobile"!==this.type||(null==(s=e.detail)?void 0:s.code))&&this.$refs.uniFabLogin.login_before(this.type,!0,o)},toSmsPage(){return this.isPhone?this.needAgreements&&!this.agree?this.$refs.agreements.popup(this.toSmsPage):void n({url:"/pages/login/login-smscode?phoneNumber="+this.phone}):(this.focusPhone=!0,o({title:"手机号码格式不正确",icon:"none",duration:3e3}))},toPwdLogin(){n({url:"../login/password"})},chooseArea(){o({title:"暂不支持其他国家",icon:"none",duration:3e3})}}},[["render",function(e,i,s,o,n,b){const x=d,v=p,w=g,L=c(m("uni-easyinput"),f),P=c(m("uni-id-pages-agreements"),y),j=h,k=c(m("uni-id-pages-fab-login"),_);return t(),a(v,{class:"uni-content"},{default:l((()=>[u(v,{class:"login-logo"},{default:l((()=>[u(x,{src:n.logo},null,8,["src"])])),_:1}),u(w,{class:"title"},{default:l((()=>[r("短信验证登录")])),_:1}),u(v,null,{default:l((()=>[u(w,{class:"tip"},{default:l((()=>[r("请确定该手机号已绑定图书馆服务")])),_:1}),u(v,{class:"phone-box"},{default:l((()=>[u(v,{onClick:b.chooseArea,class:"area"},{default:l((()=>[r("+86")])),_:1},8,["onClick"]),u(L,{class:"input-box",type:"number",inputBorder:!1,modelValue:n.phone,"onUpdate:modelValue":i[0]||(i[0]=e=>n.phone=e),maxlength:"11",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),u(P,{scope:"register",ref:"agreements"},null,512),u(j,{class:"uni-btn",type:"primary",onClick:b.toSmsPage},{default:l((()=>[r("获取验证码")])),_:1},8,["onClick"])])),_:1}),u(k,{ref:"uniFabLogin"},null,512)])),_:1})}],["__scopeId","data-v-6e55dd4a"]]);export{v as default};
