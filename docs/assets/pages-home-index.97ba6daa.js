import{d as e,m as t,a as i,o as r,c as a,w as n,n as s,b as o,e as l,f as d,g as u,F as c,r as p,i as y,h as g,j as _,k as f,l as w,t as h,p as m,q as v,s as S,u as b,S as I,v as k,x,y as C,z as M,A as $,B as N,C as U,D as j,E as A}from"./index-a42ec16d.js";import{_ as T}from"./u-loading-icon.9a1a7a4e.js";import{_ as B}from"./plugin-vueexport-helper.1b428a4d.js";const F=B({name:"u-swiper-indicator",mixins:[t,i,{props:{length:{type:[String,Number],default:e.swiperIndicator.length},current:{type:[String,Number],default:e.swiperIndicator.current},indicatorActiveColor:{type:String,default:e.swiperIndicator.indicatorActiveColor},indicatorInactiveColor:{type:String,default:e.swiperIndicator.indicatorInactiveColor},indicatorMode:{type:String,default:e.swiperIndicator.indicatorMode}}}],data:()=>({lineWidth:22}),computed:{lineStyle(){let e={};return e.width=uni.$u.addUnit(this.lineWidth),e.transform=`translateX(${uni.$u.addUnit(this.current*this.lineWidth)})`,e.backgroundColor=this.indicatorActiveColor,e},dotStyle(){return e=>{let t={};return t.backgroundColor=e===this.current?this.indicatorActiveColor:this.indicatorInactiveColor,t}}}},[["render",function(e,t,i,g,_,f){const w=y;return r(),a(w,{class:"u-swiper-indicator"},{default:n((()=>["line"===e.indicatorMode?(r(),a(w,{key:0,class:s(["u-swiper-indicator__wrapper",[`u-swiper-indicator__wrapper--${e.indicatorMode}`]]),style:o({width:e.$u.addUnit(_.lineWidth*e.length),backgroundColor:e.indicatorInactiveColor})},{default:n((()=>[l(w,{class:"u-swiper-indicator__wrapper--line__bar",style:o([f.lineStyle])},null,8,["style"])])),_:1},8,["class","style"])):d("",!0),"dot"===e.indicatorMode?(r(),a(w,{key:1,class:"u-swiper-indicator__wrapper"},{default:n((()=>[(r(!0),u(c,null,p(e.length,((t,i)=>(r(),a(w,{class:s(["u-swiper-indicator__wrapper__dot",[i===e.current&&"u-swiper-indicator__wrapper__dot--active"]]),key:i,style:o([f.dotStyle(i)])},null,8,["class","style"])))),128))])),_:1})):d("",!0)])),_:1})}],["__scopeId","data-v-7a79e5f1"]]);const O=B({name:"u-swiper",mixins:[t,i,{props:{list:{type:Array,default:e.swiper.list},indicator:{type:Boolean,default:e.swiper.indicator},indicatorActiveColor:{type:String,default:e.swiper.indicatorActiveColor},indicatorInactiveColor:{type:String,default:e.swiper.indicatorInactiveColor},indicatorStyle:{type:[String,Object],default:e.swiper.indicatorStyle},indicatorMode:{type:String,default:e.swiper.indicatorMode},autoplay:{type:Boolean,default:e.swiper.autoplay},current:{type:[String,Number],default:e.swiper.current},currentItemId:{type:String,default:e.swiper.currentItemId},interval:{type:[String,Number],default:e.swiper.interval},duration:{type:[String,Number],default:e.swiper.duration},circular:{type:Boolean,default:e.swiper.circular},previousMargin:{type:[String,Number],default:e.swiper.previousMargin},nextMargin:{type:[String,Number],default:e.swiper.nextMargin},acceleration:{type:Boolean,default:e.swiper.acceleration},displayMultipleItems:{type:Number,default:e.swiper.displayMultipleItems},easingFunction:{type:String,default:e.swiper.easingFunction},keyName:{type:String,default:e.swiper.keyName},imgMode:{type:String,default:e.swiper.imgMode},height:{type:[String,Number],default:e.swiper.height},bgColor:{type:String,default:e.swiper.bgColor},radius:{type:[String,Number],default:e.swiper.radius},loading:{type:Boolean,default:e.swiper.loading},showTitle:{type:Boolean,default:e.swiper.showTitle}}}],data:()=>({currentIndex:0}),watch:{current(e,t){e!==t&&(this.currentIndex=e)}},computed:{itemStyle(){return e=>{const t={};return this.nextMargin&&this.previousMargin&&(t.borderRadius=uni.$u.addUnit(this.radius),e!==this.currentIndex&&(t.transform="scale(0.92)")),t}}},methods:{getItemType(e){return"string"==typeof e?uni.$u.test.video(this.getSource(e))?"video":"image":"object"==typeof e&&this.keyName?e.type?"image"===e.type?"image":"video"===e.type?"video":"image":uni.$u.test.video(this.getSource(e))?"video":"image":void 0},getSource(e){return"string"==typeof e?e:"object"==typeof e&&this.keyName?e[this.keyName]:(uni.$u.error("请按格式传递列表参数"),"")},change(e){const{current:t}=e.detail;this.pauseVideo(this.currentIndex),this.currentIndex=t,this.$emit("change",e.detail)},pauseVideo(e){const t=this.getSource(this.list[e]);if(uni.$u.test.video(t)){g(`video-${e}`,this).pause()}},getPoster:e=>"object"==typeof e&&e.poster?e.poster:"",clickHandler(e){this.$emit("click",e)}}},[["render",function(e,t,i,s,g,x){const C=_(f("u-loading-icon"),T),M=y,$=v,N=S,U=b,j=I,A=k,B=_(f("u-swiper-indicator"),F);return r(),a(M,{class:"u-swiper",style:o({backgroundColor:e.bgColor,height:e.$u.addUnit(e.height),borderRadius:e.$u.addUnit(e.radius)})},{default:n((()=>[e.loading?(r(),a(M,{key:0,class:"u-swiper__loading"},{default:n((()=>[l(C,{mode:"circle"})])),_:1})):(r(),a(A,{key:1,class:"u-swiper__wrapper",style:o({height:e.$u.addUnit(e.height)}),onChange:x.change,circular:e.circular,interval:e.interval,duration:e.duration,autoplay:e.autoplay,current:e.current,currentItemId:e.currentItemId,previousMargin:e.$u.addUnit(e.previousMargin),nextMargin:e.$u.addUnit(e.nextMargin),acceleration:e.acceleration,displayMultipleItems:e.displayMultipleItems,easingFunction:e.easingFunction},{default:n((()=>[(r(!0),u(c,null,p(e.list,((t,i)=>(r(),a(j,{class:"u-swiper__wrapper__item",key:i},{default:n((()=>[l(M,{class:"u-swiper__wrapper__item__wrapper",style:o([x.itemStyle(i)])},{default:n((()=>["image"===x.getItemType(t)?(r(),a($,{key:0,class:"u-swiper__wrapper__item__wrapper__image",src:x.getSource(t),mode:e.imgMode,onClick:e=>x.clickHandler(i),style:o({height:e.$u.addUnit(e.height),borderRadius:e.$u.addUnit(e.radius)})},null,8,["src","mode","onClick","style"])):d("",!0),"video"===x.getItemType(t)?(r(),a(N,{key:1,class:"u-swiper__wrapper__item__wrapper__video",id:`video-${i}`,"enable-progress-gesture":!1,src:x.getSource(t),poster:x.getPoster(t),title:e.showTitle&&e.$u.test.object(t)&&t.title?t.title:"",style:o({height:e.$u.addUnit(e.height)}),controls:"",onClick:e=>x.clickHandler(i)},null,8,["id","src","poster","title","style","onClick"])):d("",!0),e.showTitle&&e.$u.test.object(t)&&t.title&&e.$u.test.image(x.getSource(t))?(r(),a(U,{key:2,class:"u-swiper__wrapper__item__wrapper__title u-line-1"},{default:n((()=>[w(h(t.title),1)])),_:2},1024)):d("",!0)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["style","onChange","circular","interval","duration","autoplay","current","currentItemId","previousMargin","nextMargin","acceleration","displayMultipleItems","easingFunction"])),l(M,{class:"u-swiper__indicator",style:o([e.$u.addStyle(e.indicatorStyle)])},{default:n((()=>[m(e.$slots,"indicator",{},(()=>[e.loading||!e.indicator||e.showTitle?d("",!0):(r(),a(B,{key:0,indicatorActiveColor:e.indicatorActiveColor,indicatorInactiveColor:e.indicatorInactiveColor,length:e.list.length,current:g.currentIndex,indicatorMode:e.indicatorMode},null,8,["indicatorActiveColor","indicatorInactiveColor","length","current","indicatorMode"]))]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-c342989f"]]),R=B({__name:"seatbox",props:{lib_id:{type:Number,default:0},seat_key:{type:String,default:""},info:{type:String,default:"乐育楼C201 30号"}},setup(e){const t=e;return(e,i)=>{const s=y;return r(),a(s,{class:"seatbox"},{default:n((()=>[l(s,{class:"seatinfo"},{default:n((()=>[w(h(t.info),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-414b82eb"]]),W=B({__name:"seatsgroup",props:{title:{type:String,default:"常用座位"},seatinfos:{type:Object,default:[{info:"xx厅xx号",lib_id:0,seat_key:"xx"},{info:"xx厅xx号",lib_id:0,seat_key:"xx"}]}},setup(e){const t=e,i=async()=>{x({title:"加载中",icon:"loading",duration:100});const e=C();await e.initChildrenLayout();let i="/pages/setOftenSeat/setOftenSeat?type=oftenseats";"常用座位"!=t.title&&(i="/pages/setOftenSeat/setOftenSeat?type=tmrrowseats"),M({url:i})};return(e,s)=>{const o=y;return r(),u(c,null,[l(o,{class:"title-bar"},{default:n((()=>[l(o,null,{default:n((()=>[w(h(t.title),1)])),_:1}),l(o,{class:"seatmore",onClick:i},{default:n((()=>[w("更多")])),_:1})])),_:1}),l(o,{class:"oftenseatsblock"},{default:n((()=>[(r(!0),u(c,null,p(t.seatinfos,((e,t)=>(r(),a(R,{key:t,info:e.info,lib_id:e.lib_id,seat_key:e.seat_key},null,8,["info","lib_id","seat_key"])))),128))])),_:1})],64)}}},[["__scopeId","data-v-207c084c"]]),H=B({__name:"index",setup(e){const t=C(),i=$();return N((async()=>{await t.IndexRefresh()})),U((async()=>{await t.IndexRefresh(),j()})),(e,s)=>{const o=_(f("u-swiper"),O),u=y;return r(),a(u,{class:"content"},{default:n((()=>[l(o,{class:"swiper-box",list:A(i).banner_url,indicator:"",indicatorMode:"line",circular:""},null,8,["list"]),l(W,{seatinfos:A(t).oftenseats},null,8,["seatinfos"]),A(t).canpre?(r(),a(W,{key:0,seatinfos:A(t).tmrrowseats,title:"明日专座"},null,8,["seatinfos"])):d("",!0)])),_:1})}}},[["__scopeId","data-v-f6c53640"]]);export{H as default};
